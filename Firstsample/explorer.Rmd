---
title: "Explore the First sample"
output: html_notebook
---

Library
```{r}
library(readr)
library(haven)
library(dplyr)
library(purrr)

```

Open file
```{r}
MD <- read_csv("C:/Users/thoma/SHARE/Firstsample/MD.csv")
#View(MD)
```

Observations
```{r}
# Calculate and print the percentage of NA values for each column
na_percentages_MD <- colMeans(is.na(MD)) * 100
#print(na_percentages_MD)
mean_MD = mean(na_percentages_MD)
md_MD = median(na_percentages_MD)

```

TEST
```{r}

##TEST1
#sharew1 <- read_dta("C:/Users/thoma/SHARE/sharew1_rel8-0-0_ALL_datasets_stata/sharew1_rel8-0-0_dn.dta")

##Calculate and print the percentage of NA values for each column
#na_percentages_dn_origin <- colMeans(is.na(sharew1)) * 100
#print(na_percentages_dn_origin)
#mean_dn_origin = mean(na_percentages_dn_origin)

##TEST2
#a = sum(is.na(MD$dn035_))/length(MD$dn035_) * 100
#b = sum(is.na(MD$dn014_))/length(MD$dn014_) * 100




```

Remove rows and columns when the proportion of NA exceeds 20 % 
```{r}

# Threshold for NA values
na_threshold <- 0.2

# Store names of columns to be removed
removed_columns <- names(MD)[colSums(is.na(MD)) / nrow(MD) >= na_threshold]

# Print names of removed columns
print(removed_columns)

# Remove columns with more than "na_threshold" NA
MD <- MD[, colSums(is.na(MD)) / nrow(MD) < na_threshold]


```

```{r}
# Remove rows with more than "na_threshold" NA
MD <- MD[rowSums(is.na(MD)) / ncol(MD) < na_threshold, ]
```


